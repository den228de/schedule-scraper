# ๐ BIiK Schedule Scraper

> ะะฒัะพะผะฐัะธัะตัะบะธะน ัะบัะฐะฟะตั ัะฐัะฟะธัะฐะฝะธั ะดะปั BIiK ั Telegram ะฑะพัะพะผ ะธ ะฒะตะฑ-ะธะฝัะตััะตะนัะพะผ

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://python.org)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://docker.com)
[![Telegram](https://img.shields.io/badge/Telegram-Bot-blue.svg)](https://telegram.org)

## ๐ ะะฟะธัะฐะฝะธะต

ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะพััะปะตะถะธะฒะฐะฝะธั ะธะทะผะตะฝะตะฝะธะน ะฒ ัะฐัะฟะธัะฐะฝะธะธ ััะตะฑะฝัั ะทะฐะฝััะธะน BIiK ั ัะฒะตะดะพะผะปะตะฝะธัะผะธ ะฒ Telegram ะธ ัะดะพะฑะฝัะผ ะฒะตะฑ-ะธะฝัะตััะตะนัะพะผ.

### โจ ะะพะทะผะพะถะฝะพััะธ

- ๐ **ะะฒัะพะผะฐัะธัะตัะบะธะน ัะบัะฐะฟะธะฝะณ** ะบะฐะถะดัะต 20 ะผะธะฝัั
- ๐ฑ **Telegram ะฑะพั** ั ะบะพะผะฐะฝะดะฐะผะธ ะดะปั ะฟัะพัะผะพััะฐ ัะฐัะฟะธัะฐะฝะธั
- ๐ **ะะตะฑ-ะธะฝัะตััะตะนั** ั ัะพะฒัะตะผะตะฝะฝัะผ ะดะธะทะฐะนะฝะพะผ
- ๐ **API endpoints** ะดะปั ะธะฝัะตะณัะฐัะธะธ
- ๐ณ **Docker ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั** ะดะปั ะฟัะพััะพะณะพ ัะฐะทะฒะตัััะฒะฐะฝะธั
- ๐ **ะฃะฒะตะดะพะผะปะตะฝะธั** ะฟัะธ ะธะทะผะตะฝะตะฝะธัั ัะฐัะฟะธัะฐะฝะธั
- ๐ **ะะพะดะดะตัะถะบะฐ ะฝะตัะบะพะปัะบะธั ะณััะฟะฟ** ะธ ะฝะตะดะตะปั

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   BIiK Website  โโโโโถโ   Scraper Bot    โโโโโถโ  SQLite DB      โ
โ  (biik.ru)      โ    โ   (Python)       โ    โ  (Schedule)     โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                                โ
                                โผ
                       โโโโโโโโโโโโโโโโโโโโ
                       โ  Telegram Bot    โ
                       โ  (Notifications) โ
                       โโโโโโโโโโโโโโโโโโโโ
                                โ
                                โผ
                       โโโโโโโโโโโโโโโโโโโโ
                       โ  Web Interface   โ
                       โ  (FastAPI)       โ
                       โโโโโโโโโโโโโโโโโโโโ
```

## ๐ ะัััััะน ััะฐัั

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- Docker Desktop
- Git

### ะฃััะฐะฝะพะฒะบะฐ

1. **ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน:**
```bash
git clone https://github.com/den228de/biik-schedule-scraper.git
cd biik-schedule-scraper
```

2. **ะะฐัััะพะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**
```bash
cd backend
cp .env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env ัะฐะนะป ั ะฒะฐัะธะผะธ ะฝะฐัััะพะนะบะฐะผะธ
```

3. **ะะฐะฟัััะธัะต ัะตัะตะท Docker:**
```bash
# Windows (PowerShell)
.\run.ps1

# Linux/macOS (Bash)
chmod +x run.sh
./run.sh
```

4. **ะัะบัะพะนัะต ะฒะตะฑ-ะธะฝัะตััะตะนั:**
```
http://localhost:8001
```

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะฟะฐะฟะบะต `backend/`:

```env
# ะัะฝะพะฒะฝัะต ะฝะฐัััะพะนะบะธ
GROUP_CODE=cg389
GROUP_PAGE_URL=https://biik.ru/rasp/cg389.htm
TZ=Asia/Irkutsk

# ะะฐะทะฐ ะดะฐะฝะฝัั
DATABASE_URL=sqlite:///./data/schedule.db

# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_ADMIN_ID=your_admin_id_here,second_admin_id_here
```

### ะะฐัััะพะนะบะฐ Telegram ะฑะพัะฐ

1. ะกะพะทะดะฐะนัะต ะฑะพัะฐ ัะตัะตะท [@BotFather](https://t.me/botfather)
2. ะะพะปััะธัะต ัะพะบะตะฝ ะฑะพัะฐ
3. ะะพะฑะฐะฒััะต ะฑะพัะฐ ะฒ ะณััะฟะฟั ั ะฟัะฐะฒะฐะผะธ ะฐะดะผะธะฝะธัััะฐัะพัะฐ
4. ะฃะบะฐะถะธัะต ID ัะฐัะฐ ะฒ `TELEGRAM_ADMIN_ID`

## ๐ฑ Telegram Bot

### ะะพะผะฐะฝะดั

- `/start` - ะะฐัะฐัั ัะฐะฑะพัั ั ะฑะพัะพะผ
- `/schedule` - ะะพะบะฐะทะฐัั ัะฐัะฟะธัะฐะฝะธะต ะฝะฐ ัะตะณะพะดะฝั/ะทะฐะฒััะฐ
- `/date ะะ.ะะ.ะะะะ` - ะะพะบะฐะทะฐัั ัะฐัะฟะธัะฐะฝะธะต ะฝะฐ ะบะพะฝะบัะตัะฝัั ะดะฐัั
- `/status` - ะกัะฐััั ัะฐะฑะพัั ัะบัะฐะฟะตัะฐ
- `/help` - ะกะฟัะฐะฒะบะฐ

### ะัะธะผะตัั

```
/schedule
/date 15.09.2025
/status
```

## ๐ API Endpoints

### ะัะฝะพะฒะฝัะต endpoints

- `GET /` - ะะตะฑ-ะธะฝัะตััะตะนั
- `GET /api/status` - ะกัะฐััั ัะธััะตะผั
- `GET /api/versions` - ะกะฟะธัะพะบ ะฒะตััะธะน ัะฐัะฟะธัะฐะฝะธั
- `GET /api/schedule/{version_id}` - ะะฐัะฟะธัะฐะฝะธะต ะฟะพ ะฒะตััะธะธ
- `POST /api/force-update` - ะัะธะฝัะดะธัะตะปัะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต

### ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

```bash
# ะกัะฐััั ัะธััะตะผั
curl https://your-domain.com/api/status

# ะัะธะฝัะดะธัะตะปัะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต
curl -X POST https://your-domain.com/api/force-update

# ะกะฟะธัะพะบ ะฒะตััะธะน
curl https://your-domain.com/api/versions
```

## ๐ณ Docker

### ะะพะผะฐะฝะดั Docker

```bash
# ะกะฑะพัะบะฐ ะธ ะทะฐะฟััะบ
docker-compose up --build -d

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f scraper

# ะััะฐะฝะพะฒะบะฐ
docker-compose down

# ะะตัะตะทะฐะฟััะบ
docker-compose restart scraper
```

### ะะพะฝะธัะพัะธะฝะณ

```bash
# ะกัะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose ps

# ะัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
docker stats

# ะะพะณะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
docker-compose logs -f scraper
```

## ๐๏ธ ะะฐะทัะฐะฑะพัะบะฐ

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
biik-schedule-scraper/
โโโ backend/                 # ะัะฝะพะฒะฝะพะน ะบะพะด
โ   โโโ app.py              # FastAPI ะฟัะธะปะพะถะตะฝะธะต
โ   โโโ scraper.py          # ะะพะณะธะบะฐ ัะบัะฐะฟะธะฝะณะฐ
โ   โโโ notifier.py         # Telegram ะฑะพั
โ   โโโ db.py               # ะะฐะฑะพัะฐ ั ะะ
โ   โโโ diff.py             # ะกัะฐะฒะฝะตะฝะธะต ะฒะตััะธะน
โ   โโโ static/             # ะกัะฐัะธัะตัะบะธะต ัะฐะนะปั
โ   โ   โโโ style.css       # ะกัะธะปะธ
โ   โ   โโโ app.js          # JavaScript
โ   โโโ data/               # ะะฐะทะฐ ะดะฐะฝะฝัั
โ   โโโ docker-compose.yml  # Docker ะบะพะฝัะธะณััะฐัะธั
โ   โโโ Dockerfile          # Docker ะพะฑัะฐะท
โ   โโโ requirements.txt    # Python ะทะฐะฒะธัะธะผะพััะธ
โโโ anf1project.ru/         # ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะฐะนะปั (ะธัะบะปััะตะฝะพ ะธะท Git)
โโโ README.md               # ะะพะบัะผะตะฝัะฐัะธั
```

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ

```bash
# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
cd backend
pip install -r requirements.txt

# ะะฐะฟััะบ ะฒ ัะตะถะธะผะต ัะฐะทัะฐะฑะพัะบะธ
uvicorn app:app --reload --host 0.0.0.0 --port 8000
```

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธ

### ะัะพัะผะพัั ะปะพะณะพะฒ

```bash
# ะัะต ะปะพะณะธ
docker-compose logs scraper

# ะะพัะปะตะดะฝะธะต 50 ัััะพะบ
docker-compose logs --tail=50 scraper

# ะะพะณะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
docker-compose logs -f scraper

# ะคะธะปัััะฐัะธั ะฟะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ
docker-compose logs scraper | grep -E "(ERROR|WARN|โ|โ)"
```

### ะขะธะฟะธัะฝัะต ะฟัะพะฑะปะตะผั

1. **ะัะธะฑะบะฐ ะฑะฐะทั ะดะฐะฝะฝัั**: `attempt to write a readonly database`
   - **ะะตัะตะฝะธะต**: ะัะพะฒะตัััะต ะฟัะฐะฒะฐ ะดะพัััะฟะฐ ะบ ะฟะฐะฟะบะต `data/`

2. **ะะพั ะฝะต ะพัะฒะตัะฐะตั ะฒ ัะฐัะต**
   - **ะะตัะตะฝะธะต**: ะะฐะนัะต ะฑะพัั ะฟัะฐะฒะฐ ะฐะดะผะธะฝะธัััะฐัะพัะฐ ะฒ ะณััะฟะฟะต

3. **ะะฐัะฟะธัะฐะฝะธะต ะฝะต ะพะฑะฝะพะฒะปัะตััั**
   - **ะะตัะตะฝะธะต**: ะัะพะฒะตัััะต ะดะพัััะฟะฝะพััั ัะฐะนัะฐ biik.ru

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

1. Fork ัะตะฟะพะทะธัะพัะธั
2. ะกะพะทะดะฐะนัะต feature ะฒะตัะบั (`git checkout -b feature/amazing-feature`)
3. Commit ะธะทะผะตะฝะตะฝะธั (`git commit -m 'Add amazing feature'`)
4. Push ะฒ ะฒะตัะบั (`git push origin feature/amazing-feature`)
5. ะัะบัะพะนัะต Pull Request

## ๐ ะะธัะตะฝะทะธั

ะญัะพั ะฟัะพะตะบั ัะฐัะฟัะพัััะฐะฝัะตััั ะฟะพะด ะปะธัะตะฝะทะธะตะน MIT. ะกะผ. ัะฐะนะป `LICENSE` ะดะปั ะฟะพะดัะพะฑะฝะพััะตะน.

## ๐จโ๐ป ะะฒัะพั

**Andrey Fedorov** ([@den228de](https://github.com/den228de))

- ๐ Website: [anf1project.ru](https://anf1project.ru)
- ๐ง Email: a.lng56@yandex.ru
- ๐ง Telegram: [@nvrbe4](https://t.me/nvrbe4)
- ๐ Location: Russia, Kazan

## ๐ ะะปะฐะณะพะดะฐัะฝะพััะธ

- [FastAPI](https://fastapi.tiangolo.com) - ัะพะฒัะตะผะตะฝะฝัะน ะฒะตะฑ-ััะตะนะผะฒะพัะบ
- [aiogram](https://aiogram.dev) - Telegram Bot API
- [BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/) - ะฟะฐััะธะฝะณ HTML
- [SQLModel](https://sqlmodel.tiangolo.com) - ัะฐะฑะพัะฐ ั ะฑะฐะทะพะน ะดะฐะฝะฝัั

---

โญ **ะัะปะธ ะฟัะพะตะบั ะฑัะป ะฟะพะปะตะทะตะฝ, ะฟะพััะฐะฒััะต ะทะฒะตะทะดั!** โญ